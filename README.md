# üõí ShoppingBotNC - –ú–æ–¥—É–ª—å–Ω—ã–π Telegram –ë–æ—Ç

<center>

[![Pylint](https://github.com/intervisionlord/ShoppingBotNC/actions/workflows/pylint.yml/badge.svg?branch=main)](https://github.com/intervisionlord/ShoppingBotNC/actions/workflows/pylint.yml)
![Maintenance](https://img.shields.io/badge/Maintained%3F-yes-green.svg)
![Last Commit](https://img.shields.io/github/last-commit/intervisionlord/ShoppingBotNC)

![Aiogram](https://img.shields.io/badge/aiogram-3.x-00aced?logo=telegram&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-0.120.0-009688?logo=fastapi&logoColor=white)
![Loguru](https://img.shields.io/badge/loguru-0.7.3-4B275F)

![License](https://img.shields.io/badge/license-GPL3-blue)
[![](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/intervisionlord/ShoppingBotNC)

</center>

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∫–∞—Ä–∫–∞—Å–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ Telegram –±–æ—Ç–∞ —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –Ω–∞ Python.

* ![GitHub tag (latest SemVer)](https://img.shields.io/github/v/tag/intervisionlord/ShoppingBotNC)
* **üìã [CHANGELOG](CHANGELOG.md)**

---
- [üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#Ô∏è-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
    - [1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#1-–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
    - [2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
    - [3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#3-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
    - [4. –ó–∞–ø—É—Å–∫](#4-–∑–∞–ø—É—Å–∫)
- [üõ† –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#-–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [üåê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã](#-api-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
- [üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
    - [SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#ssl-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- [üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
    - [–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#–ª–æ–∫–∞–ª—å–Ω–∞—è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
    - [–ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å Docker](#–ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å-docker)
        - [–° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ SSL](#—Å-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π-–æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ-ssl)
- [üîÑ Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#-webhook-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
    - [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-–∫–æ–º–∞–Ω–¥)
    - [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-api-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)


## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
* **FastAPI** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
* **Aiogram 3.x** - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è Telegram –±–æ—Ç–æ–≤
* **Webhook –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

‚îú‚îÄ‚îÄ .env.example                # –ü—Ä–∏–º–µ—Ä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ CHANGELOG.md
‚îú‚îÄ‚îÄ config
‚îÇ   ‚îî‚îÄ‚îÄ settings.py             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ core.py                     # –Ø–¥—Ä–æ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ handlers                    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ bot_routes              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_routes.py      # –û—Å–Ω–æ–≤–Ω–æ—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nc_deck_routes.py   # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è NC Deck
‚îÇ   ‚îú‚îÄ‚îÄ handler_bot.py          # –û—Å–Ω–æ–≤–Ω–æ–π —Ö–µ–Ω–¥–ª–µ—Ä –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handler_logging.py      # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ handler_nc_deck.py      # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å–æ–∫ NC
‚îÇ   ‚îú‚îÄ‚îÄ handler_requests.py     # –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ NC
‚îÇ   ‚îî‚îÄ‚îÄ handler_server.py       # –°–µ—Ä–≤–µ—Ä API
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ main.py                     # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ models                      # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ model_board.py          # –ú–æ–¥–µ–ª—å –¥–æ—Å–æ–∫
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ routes_base.py          # –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ—É—Ç—ã FastAPI
    ‚îî‚îÄ‚îÄ routes_webhook.py       # –†–æ—É—Ç—ã –≤–µ–±—Ö—É–∫–∞
```

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```shell
git clone <your-repo-url>
cd shoppingbot
cp .env.example .env
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:
```shell
BOT_TOKEN="your_telegram_bot_token_here"

# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
HOST="0.0.0.0"
PORT="8443"
LOG_LEVEL="INFO"

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
WEBHOOK_HOST="https://yourdomain.com"
SSL_ENABLED=True
SSL_KEY_PATH="/path/to/private.key"
SSL_CERT_PATH="/path/to/certificate.crt"
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```shell
pip install -r requirements.txt
```

### 4. –ó–∞–ø—É—Å–∫
```shell
python main.py
```

## üõ† –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

* **/start** - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
* **/help** - –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
* **/test** - –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
* **/about** - –û –±–æ—Ç–µ
* **test** (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ) - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤

## üåê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

* `GET /` - –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
* `GET /api` - –ö–æ—Ä–µ–Ω—å API
* `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
* `GET /api/test` - –¢–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
* `POST /webhook` - Webhook –¥–ª—è Telegram
* `GET /webhook` - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ–±—Ö—É–∫–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```shell
WEBHOOK_HOST="https://yourdomain.com"
SSL_ENABLED=True
```

### SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ SSL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```shell
SSL_ENABLED=True
SSL_KEY_PATH="./private.key"
SSL_CERT_PATH="./certificate.crt"
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```shell
python main.py
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å Docker
```dockerfile
FROM python:3.11

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
CMD ["python", "main.py"]
```

#### –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ SSL

* –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
* –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –≤ `.env`
* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `WEBHOOK_HOST` —Å HTTPS –¥–æ–º–µ–Ω–æ–º

## üîÑ Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å `WEBHOOK_HOST` –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

* –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π –≤–µ–±—Ö—É–∫
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫
* –õ–æ–≥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å –≤–µ–±—Ö—É–∫–∞
* –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

* –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `handlers/bot_routes/`
* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `handler_bot.py`

–ü—Ä–∏–º–µ—Ä:
```python
# handlers/bot_routes/custom_routes.py
from aiogram import Router, types
from aiogram.filters import Command

custom_router = Router()

@custom_router.message(Command("custom"))
async def custom_handler(message: types.Message):
    await message.answer("Custom command!")
```

–ó–∞—Ç–µ–º –≤ `handler_bot.py`:

```python
from handlers.bot_routes.custom_routes import custom_router

dispatcher.include_router(custom_router)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

* –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `routes/`
* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `core.py`

–ü—Ä–∏–º–µ—Ä:
```python
# routes/custom_api.py
from fastapi import APIRouter

custom_api_router = APIRouter(tags=["custom"])

@custom_api_router.get("/api/custom")
async def custom_endpoint():
    return {"message": "Custom API endpoint"}
```

–ó–∞—Ç–µ–º –≤ `core.py`:
```python
from routes.custom_api import custom_api_router

application.include_router(custom_api_router)
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GPL-3.0. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

- ‚úÖ –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑—É—á–∞—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç—É –∂–µ –ª–∏—Ü–µ–Ω–∑–∏—é –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö
- ‚ùå –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ–¥ –∑–∞–∫—Ä—ã—Ç–æ–π –ª–∏—Ü–µ–Ω–∑–∏–µ–π

–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏: [LICENSE](LICENSE)
